<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARUK - DDoS Monitoring & Control Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Toast Notification Container -->
    <div id="toast-container"></div>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <h1>üõ°Ô∏è MARUK - DDoS Monitoring &amp; Control Dashboard</h1>
            <div class="header-info">
                <span class="target-ip">Target: <strong id="target-ip">192.168.18.20</strong></span>
                <span class="last-update">Last Update: <strong id="last-update">--:--:--</strong></span>
            </div>
        </header>

        <!-- Metrics Cards Section -->
        <section class="metrics-cards">
            <div class="metric-card" id="latency-card">
                <div class="metric-icon">‚è±Ô∏è</div>
                <div class="metric-content">
                    <h3>Latency</h3>
                    <div class="metric-value" id="latency-value">-- ms</div>
                    <div class="metric-status" id="latency-status">Normal</div>
                </div>
            </div>
            
            <div class="metric-card" id="throughput-card">
                <div class="metric-icon">üìä</div>
                <div class="metric-content">
                    <h3>Throughput</h3>
                    <div class="metric-value" id="throughput-value">-- Mbps</div>
                    <div class="metric-status" id="throughput-status">Normal</div>
                </div>
            </div>
            
            <div class="metric-card" id="packet-loss-card">
                <div class="metric-icon">üì¶</div>
                <div class="metric-content">
                    <h3>Packet Loss</h3>
                    <div class="metric-value" id="packet-loss-value">-- %</div>
                    <div class="metric-status" id="packet-loss-status">Normal</div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
            <div class="chart-container">
                <h3>Latency Over Time</h3>
                <canvas id="latencyChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Throughput Over Time</h3>
                <canvas id="throughputChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Packet Loss Over Time</h3>
                <canvas id="packetLossChart"></canvas>
            </div>
        </section>

        <!-- Control Panels Section -->
        <section class="control-panels">
            <!-- Attack Control Panel -->
            <div class="control-panel attack-panel">
                <h2>üí£ Attack Control</h2>
                <div class="control-grid">
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="icmp-attack-status">‚ö™</span>
                            <span>ICMP Flood</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-attack-start" onclick="controlAttack('icmp', 'start')">START</button>
                        </div>
                    </div>
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="udp-attack-status">‚ö™</span>
                            <span>UDP Flood</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-attack-start" onclick="controlAttack('udp', 'start')">START</button>
                        </div>
                    </div>
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="tcp-attack-status">‚ö™</span>
                            <span>TCP SYN Flood</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-attack-start" onclick="controlAttack('tcp', 'start')">START</button>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 1em; text-align: center;">
                    <button class="btn btn-danger" style="width: 80%;font-weight:bold;" onclick="killAllAttacksHandler()">üí• KILL ALL ATTACKS</button>
                </div>
            </div>

            <!-- Mitigation Control Panel -->
            <div class="control-panel mitigation-panel">
                <h2>üõ°Ô∏è Mitigation Control</h2>
                <div class="control-grid">
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="icmp-mitigation-status">‚ö™</span>
                            <span>Block ICMP</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-mitigation-enable" onclick="controlMitigation('icmp', 'block')">ENABLE</button>
                            <button class="btn btn-mitigation-disable" onclick="controlMitigation('icmp', 'unblock')">DISABLE</button>
                        </div>
                    </div>
                    
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="udp-mitigation-status">‚ö™</span>
                            <span>Block UDP</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-mitigation-enable" onclick="controlMitigation('udp', 'block')">ENABLE</button>
                            <button class="btn btn-mitigation-disable" onclick="controlMitigation('udp', 'unblock')">DISABLE</button>
                        </div>
                    </div>
                    
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="tcp-mitigation-status">‚ö™</span>
                            <span>Block TCP SYN</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-mitigation-enable" onclick="controlMitigation('tcp', 'block')">ENABLE</button>
                            <button class="btn btn-mitigation-disable" onclick="controlMitigation('tcp', 'unblock')">DISABLE</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-item">
                <span>Active Attacks: <strong id="active-attacks-count">0</strong></span>
            </div>
            <div class="status-item">
                <span>Active Mitigations: <strong id="active-mitigations-count">0</strong></span>
            </div>
            <div class="status-item">
                <span id="connection-status" class="connection-ok">üü¢ Connected</span>
            </div>
        </footer>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
