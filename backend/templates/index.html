<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARUK - DDoS Monitoring & Control Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div id="toast-container"></div>

    <div class="container">
        <header class="header">
            <h1>üõ°Ô∏è MARUK - DDoS Monitoring &amp; Control Dashboard</h1>
            <div class="header-info">
                <span class="target-ip">Target: <strong id="target-ip">192.168.18.20</strong></span>
                <span class="last-update">Last Update: <strong id="last-update">--:--:--</strong></span>
            </div>
        </header>

        <!-- Metrics Cards ... (unchanged, keep as is) -->

        <section class="charts-section">
            <!-- ... remains unchanged, DO NOT remove chart canvases ... -->
        </section>

        <section class="control-panels">
            <!-- Attack Control Panel -->
            <div class="control-panel attack-panel">
                <h2>üí£ Attack Control</h2>
                <div class="control-grid">
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="icmp-attack-status">‚ö™</span>
                            <span>ICMP Flood</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-attack-start" onclick="controlAttack('icmp', 'start')">START</button>
                        </div>
                    </div>
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="udp-attack-status">‚ö™</span>
                            <span>UDP Flood</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-attack-start" onclick="controlAttack('udp', 'start')">START</button>
                        </div>
                    </div>
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="tcp-attack-status">‚ö™</span>
                            <span>TCP SYN Flood</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-attack-start" onclick="controlAttack('tcp', 'start')">START</button>
                        </div>
                    </div>
                </div>
                <div style="margin-top:1em;text-align:center;">
                    <button class="btn btn-danger" style="width:65%;font-weight:bold;font-size:1.1em;" onclick="killAllAttacks()">KILL ALL ATTACKS</button>
                </div>
            </div>

            <!-- Mitigation Control Panel -->
            <div class="control-panel mitigation-panel">
                <h2>üõ°Ô∏è Mitigation Control</h2>
                <div class="control-grid">
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="icmp-mitigation-status">‚ö™</span>
                            <span>Block ICMP</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-mitigation-enable" onclick="controlMitigation('icmp', 'block')">ENABLE</button>
                            <button class="btn btn-mitigation-disable" onclick="controlMitigation('icmp', 'unblock')">DISABLE</button>
                        </div>
                    </div>
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="udp-mitigation-status">‚ö™</span>
                            <span>Block UDP</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-mitigation-enable" onclick="controlMitigation('udp', 'block')">ENABLE</button>
                            <button class="btn btn-mitigation-disable" onclick="controlMitigation('udp', 'unblock')">DISABLE</button>
                        </div>
                    </div>
                    <div class="control-row">
                        <div class="control-label">
                            <span class="status-dot" id="tcp-mitigation-status">‚ö™</span>
                            <span>Block TCP SYN</span>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-mitigation-enable" onclick="controlMitigation('tcp', 'block')">ENABLE</button>
                            <button class="btn btn-mitigation-disable" onclick="controlMitigation('tcp', 'unblock')">DISABLE</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="status-bar">
            <div class="status-item">
                <span>Active Attacks: <strong id="active-attacks-count">0</strong></span>
            </div>
            <div class="status-item">
                <span>Active Mitigations: <strong id="active-mitigations-count">0</strong></span>
            </div>
            <div class="status-item">
                <span id="connection-status" class="connection-ok">üü¢ Connected</span>
            </div>
        </footer>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
